from src.agents.idea.graph import IdeaGraph

test_data = [
    """### NVDA 주가 전망

### 최근 동향 요약

- NVDA의 최근 30일간 주가는 상승과 하락을 반복하며 +/- 10% 이상의 변동성을 보였습니다.
- 평균 종가는 124.53이며, 현재 주가는 121.67로 약간의 하락세가 보입니다.

### 단기(1주) 전망

- **예상 주가 범위**: 120 ~ 126
- 최근 주가는 피로감을 나타내고 있어 일정한 조정이 필요할 것으로 보입니다. 단기적으로는 120달러 부근이 지지선 역할을 할 것으로 예상되며, 만약 이 지점을 이탈할 경우 더 큰 하락세가 나타날 가능성도 있습니다. 반면 126달러는 단기 저항선으로 작용할 수 있습니다.

### 중기(1달) 전망

- **예상 주가 범위**: 122 ~ 130
- 1개월 내에는 반등할 가능성이 존재합니다. 주가가 122달러를 유지하면 상승세를 살릴 수 있으며, 130달러 근처에서 저항을 받을 것으로 보입니다. 따라서 중기적으로도 122달러가 좋은 지지선으로 작용할 것으로 예상됩니다.

### 장기(6개월) 전망

- **예상 주가 범위**: 135 ~ 150
- 6개월 내에는 AI 및 데이터 센터 수요의 증가로 인해 NVDA의 주가는 긍정적인 영향을 받을 가능성이 큽니다. 장기적으로 135달러는 지지선으로 기능할 것으로 예상되며, 150달러는 저항선으로 작용할 것입니다.

### 주요 지지선/저항선

- **지지선**: 120 (단기), 122 (중기), 135 (장기)
- **저항선**: 126 (단기), 130 (중기), 150 (장기)

### 투자자들에게 조언할 사항

1. **단기적 조정 감안**: 현재 하락세가 지속될 경우, 120달러까지 하락할 위험이 있으므로 이 시기에 매수하려는 계획이 있는 경우 기다리는 것이 좋습니다.
2. **분할 매수 전략**: 아래 지지선 근처에서 분할 매수하는 전략을 고려할 수 있습니다.
3. **리스크 관리**: 주식 시장의 불확실성을 반영하여 포트폴리오의 리스크를 관리하세요.
4. **경제 지표 확인**: 경제 지표나 기술적 분석과의 조화를 고려하여 매매 결정을 내리는 것이 중요합니다.

이 데이터를 기반으로 시장의 변화에 주의하고, 적절한 대응 전략을 갖추기를 권장합니다."""
]


class IdeaAgent:
    def __init__(self):
        self.graph = IdeaGraph()

    def invoke(self, input: dict[str, any]):
        return self.graph.invoke(input)

    def build(self):
        """그래프를 빌드하는 메서드"""
        pass

    def get_edges(self):
        """그래프의 엣지들을 반환하는 메서드"""
        return []

    def get_nodes(self):
        """그래프의 노드들을 반환하는 메서드"""
        return []

    @staticmethod
    def test():
        agent = IdeaAgent()
        test_input = {
            "messages": [
                (
                    "user",
                    f"{test_data[0]} 위는 분석 결과입니다. 이 결과를 바탕으로 트레이딩 가설을 생성해주세요. 반드시 형식을 지켜주세요.",
                )
            ]
        }
        result = agent.invoke(test_input)
        print("테스트 결과:", result)
        return result
